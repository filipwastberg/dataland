<!DOCTYPE html>
<html lang="eng">
<head>
    <title>Sök hjälp! För R... &middot; </title>
    <meta name="generator" content="Hugo 0.55.6" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="Data land">
    
      <meta name="description" content="A blog about data science in R">
    
    
    <link rel="canonical" href="/2019/08/23/sok-hjalp-for-r/"/>
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/monokai.css">
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
    
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <meta property="og:title" content="Sök hjälp! För R..." />
<meta property="og:description" content="Att söka efter lösningar på R-problem Inte sällan stöter man på problem i R som man inte kan lösa genom att läsa sig till i dokumentation m.m. Det är vanligt och händer alla som lär sig R eller något annat verktyg för att göra dataanalys.
Det vanligaste är att man tar det felmeddelande man får och lägger in det i Google. Då brukar man oftast hamna på någon av följande hemsidor:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2019/08/23/sok-hjalp-for-r/" />
<meta property="article:published_time" content="2019-08-23T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-08-23T00:00:00&#43;00:00"/>

    
    
<meta itemprop="name" content="Sök hjälp! För R...">
<meta itemprop="description" content="Att söka efter lösningar på R-problem Inte sällan stöter man på problem i R som man inte kan lösa genom att läsa sig till i dokumentation m.m. Det är vanligt och händer alla som lär sig R eller något annat verktyg för att göra dataanalys.
Det vanligaste är att man tar det felmeddelande man får och lägger in det i Google. Då brukar man oftast hamna på någon av följande hemsidor:">


<meta itemprop="datePublished" content="2019-08-23T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-08-23T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="813">



<meta itemprop="keywords" content="" />

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sök hjälp! För R..."/>
<meta name="twitter:description" content="Att söka efter lösningar på R-problem Inte sällan stöter man på problem i R som man inte kan lösa genom att läsa sig till i dokumentation m.m. Det är vanligt och händer alla som lär sig R eller något annat verktyg för att göra dataanalys.
Det vanligaste är att man tar det felmeddelande man får och lägger in det i Google. Då brukar man oftast hamna på någon av följande hemsidor:"/>
<meta name="twitter:site" content="@filipwastberg"/>

    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
<div class="container">


<div id="container">
	<header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo">
          
          <i class="logo" style="background-image: url('/css/images/h_logo2.png')"></i>
          
          <span class="site-title"></span>
      </a>
      <nav id="main-nav">
          
          
          <a class="main-nav-link" href="/">Home</a>
          
          
          
          
          
          

          
          <a class="main-nav-link" href="/2019/06/24/about/">About</a>
          

          
          
          
          
          <a class="main-nav-link" href="/tags/">Tags</a>
          
          
          
          <a class="main-nav-link" href="/categories/">Categories</a>
          
          
      </nav>
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="/css/images/fwg.png"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
              <input type="search" name="q" class="search-form-input" placeholder="Sök">
              <button type="submit" class="search-form-submit">
              </button>
              <input type="hidden" name="sitesearch" value="/" />
         </form>
        </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tbody>
          <tr>
          
          
          <td><a class="main-nav-link" href="/">Home</a></td>
          
          
          
          
          
          

          
          <td><a class="main-nav-link" href="/2019/06/24/about/">About</a></td>
          

          
          
          
          
          <td><a class="main-nav-link" href="/tags/">Tags</a></td>
          
          
          
          <td><a class="main-nav-link" href="/categories/">Categories</a></td>
          
          
          <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
          <input type="search" name="q" class="search-form-input" placeholder="Search">
          <input type="hidden" name="sitesearch" value="/" />
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</header>

   	
   	<div class="outer">
   	
    	<aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      
      <img id="avatar" src="/css/images/fwg.png">
      
      <h2 id="name">Data land</h2>
      <h3 id="title">A blog about data science in R.</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Sweden</span>
      
          <a id="follow" href="https://github.com/filipwastberg">
              Follow
          </a>
      
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        7
        <span>Inlägg</span>
      </div>
      <div class="article-info-block">
        
          2
        
        <span>
            Taggar
        </span>
      </div>
    </div>
    <div class="profile-block social-links">
      <table>
        <tr>
          
<td><a href="//github.com/filipwastberg" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></td>



















































<td><a href="//twitter.com/filipwastberg" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></td>


          <td><a href="/index.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></td>
        </tr>
      </table>
    </div>
  </div>
</aside>

    

    <section id="main">
    
    <article id="page-undefined" class="article article-type-page" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
            <img src="/css/images/helpme.jpg" class="article-banner">
        

        <header class="article-header">
    <a href="/2019/08/23/sok-hjalp-for-r/">
    <h1 class="article-title" itemprop="name">
        Sök hjälp! För R...
    </h1>
    </a>
    <div class="article-meta">

        
        <div class="article-date">
            <i class="fa fa-calendar"></i>
            <time datetime="2019-08-23 00:00:00 &#43;0000 UTC" itemprop="datePublished">2019-08-23</time>
            &middot;
            813
            Ord
            &middot;
            4
            Minuter
        </div>
        
        
            
            
            <div class="article-category">
                <i class="fa fa-folder"></i>
                
                
                <a class="article-category-link" href="/categories/r">r</a>
                
                
            </div>
            
        

        
    </div>
</header>

        <div class="article-entry" itemprop="articleBody">
            


<div id="att-soka-efter-losningar-pa-r-problem" class="section level2">
<h2>Att söka efter lösningar på R-problem</h2>
<p>Inte sällan stöter man på problem i R som man inte kan lösa genom att läsa sig till i dokumentation m.m. Det är vanligt och händer alla som lär sig R eller något annat verktyg för att göra dataanalys.</p>
<p>Det vanligaste är att man tar det felmeddelande man får och lägger in det i Google. Då brukar man oftast hamna på någon av följande hemsidor:</p>
<p>• Stackoverflow.com
• RStudio.community.com
• statmethods.net</p>
<p>Man brukar dessutom snabbt inse att man inte är den första som stöter på ett problem, men det kan ändå vara svårt att navigera bland olika potentiella lösningar. Så hur gör man då för att hitta bästa lösningen?</p>
<p>Det finns så klart inget givet svar på den frågan men jag som har programmerat i R i några år brukar ha några förhållningsregler:</p>
<ul>
<li>Leta efter svar som är enkla: ingår det massa loopar eller ser koden komplicerad ut och det är enkelt problem du ska lösa så finns det sannolikt bättre svar</li>
<li>Leta efter de senaste svaren: programmeringsspråk är i ständig utveckling och det kommer nya metoder som är bättre än de som fanns för 10 år sedan. Så är även fallet med R. R har framför allt de senaste 5-10 åren blivit otroligt mycket enklare att använda för nybörjare. Därför kan det vara en poäng att leta efter nyare svar. Det är särskilt viktigt på StackOverflow där gamla svar kan ha ett försprång tidsmässigt och därför ha fler röster.</li>
</ul>
</div>
<div id="ett-konkret-exempel" class="section level2">
<h2>Ett konkret exempel</h2>
<p>Jag tänkte ta ett konkret exempel där jag har ett dataset som jag läst in i R där vi har en faktor-kolumn för belopp som innehåller belopp skrivet som en string, typ ”1 540”. För att kunna göra beräkningar på den behöver vi göra om den till en numerisk.</p>
<pre class="r"><code>data &lt;- data.frame(belopp = factor(c(&quot;2  592&quot;, &quot;1 500&quot;, &quot;2  216&quot;, &quot;2 124&quot;, &quot;951&quot;, &quot;430&quot;, &quot;5 011&quot;)),
                   letter = sample(letters, 7, replace = T))

data</code></pre>
<pre><code>##   belopp letter
## 1 2  592      u
## 2  1 500      h
## 3 2  216      m
## 4  2 124      c
## 5    951      u
## 6    430      r
## 7  5 011      f</code></pre>
<p>Så det första jag vill göra här är att göra om den till numerisk, jag tänker att funktionen <code>as.numeric()</code> enkelt kan göra det.</p>
<pre class="r"><code>library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>data %&gt;% 
  mutate(belopp = as.numeric(belopp))</code></pre>
<pre><code>##   belopp letter
## 1      3      u
## 2      1      h
## 3      2      m
## 4      4      c
## 5      7      u
## 6      5      r
## 7      6      f</code></pre>
<p>Men eftersom <code>belopp</code> är en faktor så tror den att vi försöka göra om kategorisk data till numerisk. Så den tar kategorinivåerna, vilket inte alls är vad vi vill.</p>
<p>Så vi behöver först göra om den till <code>character</code></p>
<pre class="r"><code>data %&gt;% 
  mutate(belopp = as.numeric(as.character(belopp)))</code></pre>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>##   belopp letter
## 1     NA      u
## 2     NA      h
## 3     NA      m
## 4     NA      c
## 5    951      u
## 6    430      r
## 7     NA      f</code></pre>
<p>Nu visar det sig att <code>as.numeric()</code> bara kan hantera tecken som är siffror, vi har ett mellanslag här som inte är en siffra, så därför ger den tillbaka <code>NA</code> med ett varningsmeddelande: <code>NAs introduced by coercion</code>.</p>
<p>Hm, okej, så det vi vill göra (och det som är exemplet) är att ta bort blankstegen i strängarna.</p>
<p>Det blir vår första googling:</p>
<pre class="r"><code>knitr::include_graphics(&quot;https://raw.githubusercontent.com/filipwastberg/dataland/master/static/img/google-whitespace.png&quot;)</code></pre>
<p><img src="https://raw.githubusercontent.com/filipwastberg/dataland/master/static/img/google-whitespace.png" /><!-- --></p>
<p>Vilket leder oss till den en fråga på StackOverflow. StackOverflow är en hemsida där programmerare kan ställa frågor som andra kan svara på.</p>
<p>Frågan vi kommer till finns här: <a href="https://stackoverflow.com/questions/34591329/remove-white-space-from-a-data-frame-column-and-add-path" class="uri">https://stackoverflow.com/questions/34591329/remove-white-space-from-a-data-frame-column-and-add-path</a></p>
<p>På StackOverflow hamnar de frågor med flest <em>Votes</em> högst upp. I det svaret som har fått flest röster föreslår personen att vi ska använda funktionen <code>gsub()</code> som är en funktion som finns “inbyggd” i R.</p>
<pre class="r"><code>data %&gt;% 
  mutate(belopp = as.numeric(as.character(gsub(&#39;\\s+&#39;, &#39;&#39;, belopp))))</code></pre>
<pre><code>##   belopp letter
## 1   2592      u
## 2   1500      h
## 3   2216      m
## 4   2124      c
## 5    951      u
## 6    430      r
## 7   5011      f</code></pre>
<p>Vad för alternativ finns?</p>
<p>Nu är det inget fel alls på det här svaret, det gör vad vi vill. Men om man i längden arbetar mycket med att manipulera text i data så brukar jag rekommendera paketet <code>stringr</code>.</p>
<p>Vi hade kunnat göra samma sak som ovan med funktionen <code>str_replace()</code>.</p>
<pre class="r"><code>library(stringr)
data %&gt;% 
  mutate(belopp = as.numeric(as.character(str_replace(belopp, &#39;\\s+&#39;, &#39;&#39;))))</code></pre>
<pre><code>##   belopp letter
## 1   2592      u
## 2   1500      h
## 3   2216      m
## 4   2124      c
## 5    951      u
## 6    430      r
## 7   5011      f</code></pre>
<p><code>stringr</code> är ett paket som är nytt relativt till <code>gsub()</code> och andra “inbyggda” funktioner i R och det är, enligt mig, enklare att använda. Därför föredrar jag det.</p>
<p>Lycka till!</p>
<p>/ Filip</p>
</div>

        </div>
        <footer class="article-footer">
    <a data-url="/2019/08/23/sok-hjalp-for-r/" data-id="56f39fbeb3f8cada1c2139bc2835f75f" class="article-share-link">
        <i class="fa fa-share"></i>
        Dela
    </a>
    
    <a href="/2019/08/23/sok-hjalp-for-r/#disqus_thread" class="article-comment-link">
        Kommentarer
    </a>
    

    <script>
    (function ($) {
        
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
    </script>
</footer>

    </div>

    
<nav id="article-nav">
    
    <a href="/2019/06/25/python-packages-for-r-users/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">
          Äldre inlägg
      </strong>
      <div class="article-nav-title">Creating Python modules like R packages</div>
    </a>
    

    
</nav>


</article>


<section id="comments">
    <div id="disqus_thread">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dataland-rbind-io-1" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
</section>


    </section>

   	
    	<aside id="sidebar">
    
<div class="widget-wrap">
    <h3 class="widget-title">
        Tidigare inlägg
    </h3>
    <div class="widget">
        <ul id="recent-post">
            
            <li>
                <div class="item-thumbnail">
                    <a href="/2019/08/23/sok-hjalp-for-r/" class="thumbnail">
                    
                        <span style="background-image:url(/css/images/helpme.jpg)" alt="Sök hjälp! För R..." class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="/categories/r">
                        r
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="/2019/08/23/sok-hjalp-for-r/" class="title">Sök hjälp! För R...</a></p>
                    <p class="item-date">
                        <time datetime="2019-08-23 00:00:00 &#43;0000 UTC" itemprop="datePublished">2019-08-23</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="/2019/06/25/python-packages-for-r-users/" class="thumbnail">
                    
                        <span style="background-image:url(/css/images/pr.jpg)" alt="Sök hjälp! För R..." class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="/categories/python">
                        python
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="/2019/06/25/python-packages-for-r-users/" class="title">Creating Python modules like R packages</a></p>
                    <p class="item-date">
                        <time datetime="2019-06-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">2019-06-25</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="/2019/06/24/about/" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    <p class="item-title"><a href="/2019/06/24/about/" class="title">About</a></p>
                    <p class="item-date">
                        <time datetime="2019-06-24 21:49:20 &#43;0200 CEST" itemprop="datePublished">2019-06-24</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="/2017/11/26/depp-index-p%C3%A5-stockholm-data-science-meetup/" class="thumbnail">
                    
                        <span class="thumbnail-image thumbnail-none"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="/categories/musik">
                        musik
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="/2017/11/26/depp-index-p%C3%A5-stockholm-data-science-meetup/" class="title">Depp-index på Stockholm Data Science Meetup</a></p>
                    <p class="item-date">
                        <time datetime="2017-11-26 00:00:00 &#43;0000 UTC" itemprop="datePublished">2017-11-26</time>
                    </p>
                </div>
            </li>
            
            <li>
                <div class="item-thumbnail">
                    <a href="/2017/11/15/har-styr-kvinnorna/" class="thumbnail">
                    
                        <span style="background-image:url(/css/images/karta.png)" alt="Sök hjälp! För R..." class="thumbnail-image"></span>
                    
                    </a>
                </div>
                <div class="item-inner">
                    
                    
                    <p class="item-category">
                        
                        <a class="article-category-link" href="/categories/offentlig-statistik">
                        Offentlig statistik
                        </a>
                    </p>
                    
                    
                    <p class="item-title"><a href="/2017/11/15/har-styr-kvinnorna/" class="title">Kommunerna där kvinnor styr</a></p>
                    <p class="item-date">
                        <time datetime="2017-11-15 00:00:00 &#43;0000 UTC" itemprop="datePublished">2017-11-15</time>
                    </p>
                </div>
            </li>
            
        </ul>
    </div>
</div>


    

    

    


    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

    
	</div>
</div>

<footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019
      Powered by <a href="//gohugo.io">Hugo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>.
    </div>
  </div>
</footer>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-108426846-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script src="/js/script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>


<script>hljs.initHighlightingOnLoad();</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




</body>
</html>